extend main

block content
    div(class="panel panel-danger col-lg-offset-4 col-lg-4", ng-controller="UsersController as vm")
        div(class="panel-heading")
            h3(class="panel-title text-center")
                | Register to our deals store
        div(class="panel-body")
            form(class="form-horizontal", method="post", action="/users/register", name="regForm")
                fieldset
                    div(class="form-group")
                        label(for="email" class="col-lg-4 control-label")
                            | Email
                        div(class="col-lg-8")
                            input(type="email" class="form-control" name="email" id="email" placeholder="Email" required="required" ng-model="vm.user.email")
                    div(class="form-group")
                        label(for="username" class="col-lg-4 control-label")
                            | Username
                        div(class="col-lg-8")
                            input(type="text" class="form-control" name="username" id="username" placeholder="Username" required="required" ng-change="vm.checkIfUsernameExists()" ng-model="vm.user.username")
                            span(class="text-danger" ng-if="vm.usernameExists") Username already exists.
                    div(class="form-group")
                        label(for="password" class="col-lg-4 control-label")
                            | Password
                        div(class="col-lg-8")
                            input(type="password" class="form-control" name="password" id="password" placeholder="Password" required="required" ng-model="vm.user.password")
                    div(class="form-group")
                        label(for="confirmPassword" class="col-lg-4 control-label")
                            | Confirm password
                        div(class="col-lg-8")
                            input(type="password" class="form-control" name="confirmPassword" id="confirmPassword" placeholder="Confirm password" required="required" ng-model="vm.user.confirmPassword")
                    div(class="form-group")
                        button(type="submit" class="btn btn-danger col-lg-offset-4 col-lg-8" ng-disabled="regForm.$invalid || vm.user.password !== vm.user.confirmPassword || vm.usernameExists")
                            | Register

block bottomBodyContent
    script(src="/public/js/users/users-controller.js")
    script(src="/public/js/users/users-service.js")